CREATE TABLE "roles" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "auth_role" VARCHAR(20)
);

CREATE TABLE "quiz_topics" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "topic_name" VARCHAR(30),
  "created_at" TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE "users" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "first_name" VARCHAR(100),
  "last_name" VARCHAR(100),
  "username" VARCHAR(30) UNIQUE NOT NULL,
  "password" VARCHAR(255),
  "role_id" SMALLINT NOT NULL REFERENCES roles(id),
  "created_at" TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);



CREATE TABLE "user_interests" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "user_id" INTEGER REFERENCES users(id),
  "topic_id" INTEGER REFERENCES quiz_topics(id)
);



CREATE TABLE "questions" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "topic_id" INTEGER REFERENCES quiz_topics(id),
  "question" VARCHAR(300),
  "created_at" TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE "answers" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "question_id" INTEGER REFERENCES questions(id),
  "option" VARCHAR(100),
  "answer" BOOLEAN,
  "created_at" TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE "scores" (
  "id" INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "user_id" INTEGER REFERENCES users(id),
  "topic_id" INTEGER REFERENCES quiz_topics(id),
  "score" INTEGER,
  "scored_at" TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
